<!DOCTYPE html>
<html>
  <head>
    <meta charset=UTF-8 />
    <title>TEST</title>
    <script>
    
      var cookieExpirationAdd = "; expires=Fri, 31 Dec 9999 23:59:59 GMT";
      var cookieExpirationDel = "; expires=Thu, 01 Jan 1970 00:00:01 GMT";
        
      function initN() {
        showAllCookies();
      }
        
      function createNote() {
        var noteText = prompt("enter text");
        if(noteText === '') {
          noteText = 'null';
        }
        var noteCount = getCookieValue('noteCount');
        if(noteCount === '') {
          noteCount = 1;
          setCookie('noteCount', noteCount);
          setCookie('note' + noteCount, noteText);
        } else {
          noteCount = parseInt(noteCount) + 1;     
          setCookie('noteCount', noteCount);
          setCookie('note' + noteCount, noteText);
        }
      }
        
      function updateNote() {
        var noteId = prompt("enter note id");        
        var text = getCookieValue('note' + noteId);
        if(text === '' || text === 'null') {
          alert('Nothing found with id: ' + noteId);
          return;
        }
        var newText = prompt('enter update', text);
        if(newText === '') {
          newText = 'null';
        }
        setCookie('note' + noteId, newText);
      }
      
      function deleteNote() {
        var noteId = prompt("enter note id");
        if(getCookieValue('note' + noteId) === '') {
          alert('Nothing found with id: ' + noteId);
          return;
        }
        var noteCount = getCookieValue('noteCount');
        noteCount = parseInt(noteCount) - 1;
        setCookie('noteCount', noteCount);        
        deleteCookie('note' + noteId);
      }

        
        
        
        
        
      // ------------- Cookie functions -------------
        
      function setCookie(cName, cValue) {
        document.cookie = cName + "=" + cValue + cookieExpirationAdd;            
      }
      
      function deleteCookie(cName) {
        document.cookie = cName + "=" + cookieExpirationDel;
      }
      
      function getCookieValue(cName) {
        var cArray = document.cookie.split(";");
        var cNameTmp = '';
        for(var i = 0; i < cArray.length; i++) {
          cNameTmp = cArray[i].trim().split("=")[0];
          if(cNameTmp === cName) {
            return cArray[i].trim().split("=")[1];
          }
        }
        return '';
      }
      
      function deleteAllCookies() {
        if(document.cookie != '') {
          var cArray = document.cookie.split(";");
          for(var i = 0; i < cArray.length; i++) {
            deleteCookie(cArray[i].trim().split("=")[0])
          }
        }
      }
      
      
      function showAllCookies() {
        if(document.cookie != '') {
          document.getElementById("outDiv01").innerHTML = document.cookie +
            ' [' + document.cookie.length + ']';
        } else {
          document.getElementById("outDiv01").innerHTML = 'nothing';
        }          
      }
        
        
        
      // --------------------------------------------

  

  
      function test() {
        var normal = 'count=2;n1=test 23;n2=aaaaa;n3=kako kada tako to uff kuff oos sad;n4= sdas asdasda sdasda ssdasdasd';
        console.log(normal);
        console.log(normal.length);
        console.log(byteCount(normal));
        var encoded = window.btoa(normal);
        console.log(encoded);
        console.log(encoded.length);
        console.log(byteCount(encoded));
        var decoded = window.atob(encoded);
        console.log(decoded);
        console.log(decoded.length);
        console.log(byteCount(decoded));
      }
      
      function byteCount(s) {
        return encodeURI(s).split(/%..|./).length - 1;
      }
      
  </script>
  </head>
  <body>
       
    <div>
      <input type="button" id="b1" value="New Note" onclick="createNote();"><br>
      <input type="button" id="b2" value="Update Note" onclick="updateNote();"><br>
      <input type="button" id="b3" value="Delete Note" onclick="deleteNote();"><br>
      <input type="button" id="b4" value="Delete All Cookies" onclick="deleteAllCookies();"><br>
      <input type="button" id="b5" value="Show All Cookies" onclick="showAllCookies();"><br>
      <input type="button" id="b6" value="Test" onclick="test();"><br>
    </div>
    
    <hr>
    
    <div id="outDiv01"></div>

    <script>
        initN();
    </script>
  </body>
</html>
